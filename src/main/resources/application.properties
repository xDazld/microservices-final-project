quarkus.http.port=8080
quarkus.micrometer.export.prometheus.path=/metrics
# MongoDB Configuration
quarkus.mongodb.database=dns_shield
# Messaging Channels - Using topic exchanges for flexible routing
mp.messaging.outgoing.dns-query-logs.connector=smallrye-rabbitmq
mp.messaging.outgoing.dns-query-logs.exchange.name=dns-query-logs
mp.messaging.outgoing.dns-query-logs.exchange.type=topic
mp.messaging.outgoing.dns-query-logs.routing-key=dns.query.#
mp.messaging.outgoing.dns-security-alerts.connector=smallrye-rabbitmq
mp.messaging.outgoing.dns-security-alerts.exchange.name=dns-security-alerts
mp.messaging.outgoing.dns-security-alerts.exchange.type=topic
mp.messaging.outgoing.dns-security-alerts.routing-key=dns.security.#
mp.messaging.incoming.dns-query-logs-in.connector=smallrye-rabbitmq
mp.messaging.incoming.dns-query-logs-in.queue.name=dns-query-logs-queue
mp.messaging.incoming.dns-query-logs-in.exchange.name=dns-query-logs
mp.messaging.incoming.dns-query-logs-in.queue.durable=true
mp.messaging.incoming.dns-query-logs-in.exchange.durable=true
mp.messaging.incoming.dns-security-alerts-in.connector=smallrye-rabbitmq
mp.messaging.incoming.dns-security-alerts-in.queue.name=dns-security-alerts-queue
mp.messaging.incoming.dns-security-alerts-in.exchange.name=dns-security-alerts
mp.messaging.incoming.dns-security-alerts-in.queue.durable=true
mp.messaging.incoming.dns-security-alerts-in.exchange.durable=true
# Dashboard Event Streams - Real-time updates for web frontend
# Unified topic exchange for all dashboard events (metrics, logs, stats, alerts)
# All three publishers send to the same exchange with the same routing key
mp.messaging.outgoing.metrics-events-out.connector=smallrye-rabbitmq
mp.messaging.outgoing.metrics-events-out.exchange.name=dashboard-events
mp.messaging.outgoing.metrics-events-out.exchange.type=topic
mp.messaging.outgoing.metrics-events-out.routing-key=dashboard.#
mp.messaging.outgoing.logs-events-out.connector=smallrye-rabbitmq
mp.messaging.outgoing.logs-events-out.exchange.name=dashboard-events
mp.messaging.outgoing.logs-events-out.exchange.type=topic
mp.messaging.outgoing.logs-events-out.routing-key=dashboard.#
mp.messaging.outgoing.stats-updates-out.connector=smallrye-rabbitmq
mp.messaging.outgoing.stats-updates-out.exchange.name=dashboard-events
mp.messaging.outgoing.stats-updates-out.exchange.type=topic
mp.messaging.outgoing.stats-updates-out.routing-key=dashboard.#
# Single consumer receives all dashboard events from the unified exchange
mp.messaging.incoming.metrics-events-in.connector=smallrye-rabbitmq
mp.messaging.incoming.metrics-events-in.queue.name=dashboard-events-queue
mp.messaging.incoming.metrics-events-in.exchange.name=dashboard-events
mp.messaging.incoming.metrics-events-in.exchange.durable=true
mp.messaging.incoming.metrics-events-in.queue.durable=false
mp.messaging.incoming.metrics-events-in.routing-key=dashboard.#
mp.messaging.incoming.metrics-events-in.auto-ack=true
# JWT Configuration
mp.jwt.verify.issuer=https://dns-shield.local
mp.jwt.verify.publickey.location=classpath:keys/publicKey.pem
smallrye.jwt.sign.key.location=classpath:keys/privateKey.pem
quarkus.smallrye-jwt.enabled=true
# Security Configuration
# Use method-level annotations (@PermitAll, @RolesAllowed) for fine-grained control
quarkus.security.jaxrs.deny-unannotated-endpoints=false
# CORS configuration for frontend
quarkus.http.cors=true
quarkus.http.cors.origins=/.*/
quarkus.http.cors.methods=GET,POST,PUT,DELETE,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
# LangChain4j / Ollama Configuration
quarkus.langchain4j.ollama.timeout=120s
quarkus.langchain4j.timeout=120s
# RFC 9520 Negative Caching Configuration
# Minimum cache duration for resolution failures (seconds)
# RFC 9520 Section 3.2: "Resolvers MUST cache resolution failures for at least 1 second"
dns.negative-cache.min-duration=1
# Maximum cache duration for resolution failures (seconds)
# RFC 9520 Section 3.2: "resolution failures MUST NOT be cached for longer than 5 minutes"
dns.negative-cache.max-duration=300
# Initial backoff duration for first failure (seconds)
dns.negative-cache.initial-backoff=5
# Maximum number of retry attempts per query
# RFC 9520 Section 3.1: "MUST NOT retry...more than twice (i.e., three queries in total)"
dns.resolver.max-retries=2
# Maximum entries in negative cache to prevent resource exhaustion
# RFC 9520 Section 3.2: "implement measures to mitigate resource exhaustion attacks"
dns.negative-cache.max-entries=10000
# RFC 8767 Serve-Stale Configuration
# Maximum time to retain stale data in cache (seconds)
# RFC 8767 Section 5: "The suggested value is between 1 and 3 days"
# Default: 86400 seconds (1 day)
dns.stale.max-age=86400
# Client response timeout (milliseconds)
# RFC 8767 Section 5: "recommended value of 1.8 seconds"
dns.stale.client-timeout=1800
# Failure recheck interval (seconds)
# RFC 8767 Section 5: "no more frequently than every 30 seconds"
dns.stale.failure-recheck=30
# TTL to set on stale responses (seconds)
# RFC 8767 Section 4: "RECOMMENDED value of 30 seconds"
dns.stale.response-ttl=30
# RFC 5358 Access Control Configuration
# Prevent use of recursive nameservers in reflector/amplification attacks
# RFC 5358 Section 4: "By default, nameservers SHOULD NOT offer recursive service to external networks"
# Enable or disable recursion globally
# RFC 5358: Turn recursion off completely for authoritative-only servers
dns.rfc5358.recursion-enabled=true
# Default policy: true = deny all except allowed, false = allow all (permissive mode for development)
# RFC 5358 best practice: Set to true in production to deny external networks by default
dns.rfc5358.default-deny=false
# Allowed networks (CIDR notation)
# RFC 5358 Section 4: "Use the IP source address of the DNS queries and filter them through an ACL"
# Default: Private networks per RFC 1918 and IPv6 equivalents
# Format: Comma-separated list of CIDR ranges or individual IPs
# Examples:
#   - 127.0.0.0/8 (localhost)
#   - 10.0.0.0/8 (private network)
#   - 172.16.0.0/12 (private network)
#   - 192.168.0.0/16 (private network)
#   - ::1/128 (IPv6 localhost)
#   - fc00::/7 (IPv6 unique local)
dns.rfc5358.allowed-networks=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,::1/128,fc00::/7
# Endpoint Usage Statistics Configuration
# Enable/disable recording of endpoint usage statistics
dns.statistics.enabled=true
# Include request/response body sizes in statistics (may have performance impact)
dns.statistics.track-payload-size=true
# Use a small model
quarkus.langchain4j.ollama.chat-model.model-name=qwen3:0.6b
# OpenAPI needed for project requirements
quarkus.swagger-ui.always-include=true
# Quarkus Cache Configuration
# Use Redis as the cache backend
quarkus.cache.type=redis
# quarkus.redis.hosts set by Dev Services
# Redis connection pool configuration - tuned for high concurrency
quarkus.redis.pool.max-waiting=100
quarkus.redis.pool.max-size=50
quarkus.redis.timeout=5s
quarkus.redis.max-retries=3
# DNS Response Cache (positive cache)
quarkus.cache.redis.dns-response-cache.expire-after-write=300s
quarkus.cache.redis.dns-response-cache.prefix=dns:response
quarkus.cache.redis.dns-response-cache.value-type=dev.pacr.dns.service.DNSResolver$CachedResponse
quarkus.cache.redis.dns-response-cache.use-optimistic-locking=false
# DNS Negative Cache (failure cache)
quarkus.cache.redis.dns-negative-cache.expire-after-write=300s
quarkus.cache.redis.dns-negative-cache.prefix=dns:negative
quarkus.cache.redis.dns-negative-cache.value-type=dev.pacr.dns.service.NegativeCacheService$FailureCacheEntry
quarkus.cache.redis.dns-negative-cache.use-optimistic-locking=false

